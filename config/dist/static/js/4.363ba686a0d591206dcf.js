webpackJsonp([4],{"D+iS":function(e,t){e.exports="data:image/png;base64,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"},IPJh:function(e,t){},Pv4D:function(e,t){},Quw4:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("mvHQ"),a=o.n(n),l=o("VI/i"),i=o.n(l),s=o("pFYg"),c=o.n(s),r={name:"Videos",props:{isOpen:!1},data:function(){return{video_show:!0,canvas_show:!1,url:"",loading:!0}},watch:{isOpen:function(e){this.isOpen=e,console.info(e),e&&this.camera_options()}},methods:{camera_options:function(){var e=this,t=this.$refs.videos;console.info(t),navigator.mediaDevices.getUserMedia({video:{width:498,height:238}}).then(function(e){console.info(e),video.srcObject=e,video.play()}).catch(function(e){console.info(e)}),setTimeout(function(){var t=document.getElementById("canvas");if(console.info(t),t.getContext("2d").drawImage(video,0,0,200,100),console.info("undefined"==typeof video?"undefined":c()(video)),console.info(t.getContext("2d").drawImage(video,0,0,200,100)),t=t.toDataURL("image/png"),console.info(t),t){var o=e.dataURLtoBlob(t),n=e.blobToFile(o,"imgName");if(o){var a=e.url+"";e.$axios({method:" post",url:a,data:{}}).then(function(e){console.info(e)}).catch(function(e){console.info(e)})}console.info(n)}},1e3)},dataURLtoBlob:function(e){for(var t=e.split(","),o=t[0].match(/:(.*?);/)[1],n=atob(t[1]),a=n.length,l=new Uint8Array(a);a--;)l[a]=n.charCodeAt(a);return new Blob([l],{type:o})},blobToFile:function(e,t){return e.lastModifiedDate=new Date,e.name=t,e}}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"videos",staticClass:"videos"},[t("video",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"},{name:"show",rawName:"v-show",value:this.video_show,expression:"video_show"}],staticClass:"vio",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",id:"video",autoplay:"autoplay"}}),this._v(" "),t("canvas",{directives:[{name:"show",rawName:"v-show",value:this.canvas_show,expression:"canvas_show"}],attrs:{id:"canvas",width:"498",height:"238"}})])},staticRenderFns:[]};var g={data:function(){return{login_flag:!0,login_wx:!1,login_face:!1,login_iphone:!1,login_cus_num:!1,check_login:"login_flag",wel_login:"欢迎登录",login_btn:!0,dis_btn:!1,value_btn:"发送验证码",video:"",flag_camera:!1,url:"http://47.98.113.173:9519",account:{username:"",pwd:"",code:"",phone:"",check_code:""},pwdFocus:!1,allowLogin:!0,checked:!0,HotelArr:[],HotelValue:"",schedule:[{value:"code1",label:"早班"},{value:"code2",label:"中班"},{value:"code3",label:"晚班"}],scheduleValue:""}},components:{videos:o("VU/8")(r,u,!1,function(e){o("IPJh")},"data-v-61e5248e",null).exports},created:function(){var e=JSON.parse(window.localStorage.getItem("register-user"));e&&(this.account.code="",this.account.username=e.username,this.account.pwd="",this.pwdFocus=!0)},methods:{send_code:function(){var e=this;e.dis_btn=!0,e.value_btn=59;var t=setInterval(function(){e.value_btn--,0===e.value_btn&&(clearInterval(t),e.dis_btn=!1,e.value_btn="发送验证码")},1e3);if(!/^1[34578]\d{9}$/.test(e.account.phone))return e.hintInfo("warning","手机号有误，请重新填写！"),e.dis_btn=!1,e.value_btn="发送验证码",clearInterval(t),!1;var o=e.url+"/v1/common/sms/employee/login";e.$axios({method:"post",url:o,data:{phone:e.account.phone}}).then(function(t){"success"===t.data.message?e.hintInfo("success","发送成功！"):(console.info(t),e.hintInfo("success","发送失败！"))}).catch(function(e){console.info(e)})},getmd5:function(e){var t=i.a.createHash("md5");return t.update(e),t.digest("hex")},login_type:function(e){"login_flag"!=e&&(this.wel_login="返回密码登录"),"login_cus_num"===e||("login_wx"===e?(this.account={},this.check_login="login_wx",this.login_btn=!1,this.login_flag=!1,this.login_face=!1,this.login_iphone=!1,this.login_cus_num=!1,this.login_wx=!0,this.flag_camera=!1):"login_face"===e?(this.account={},this.allowLogin=!1,this.login_btn=!1,this.check_login="login_face",this.login_flag=!1,this.login_face=!0,this.login_iphone=!1,this.login_cus_num=!1,this.login_wx=!1,this.flag_camera=!0,console.info(this.flag_camera)):"login_iphone"===e?(this.account={},this.check_login="login_iphone",this.login_btn=!0,this.login_flag=!1,this.login_face=!1,this.login_iphone=!0,this.login_cus_num=!1,this.login_wx=!1,this.flag_camera=!1):(this.account={},this.check_login="login_flag",this.login_btn=!0,this.login_flag=!0,this.login_face=!1,this.login_iphone=!1,this.login_cus_num=!1,this.login_wx=!1,this.flag_camera=!1))},return_login:function(){this.wel_login="欢迎登录",this.login_btn=!0,this.login_flag=!0,this.login_face=!1,this.login_iphone=!1,this.login_cus_num=!1,this.login_wx=!1,this.flag_camera=!1},handleLogin:function(){var e=this;if("login_flag"===e.check_login){var t=this.account.username,o=this.account.pwd,n=this.account.code;t.trim().length>0&&o.trim().length>0&&n.trim().length>0?this.$axios({method:"post",url:"http://47.98.113.173:9519/v1/common/employee/login",data:{code:n,user_name:t,password:e.getmd5(o)}}).then(function(t){console.info(t),"success"==t.data.message?(sessionStorage.setItem("authorization",t.data.new_authorization),localStorage.setItem("access-user",a()(t.data.real_name)),e.$router.push({path:"/"})):e.$message({message:"登录失败",type:"warning"})}).catch(function(t){e.$message({message:"登录失败",type:"warning"})}):e.hintInfo("warning","请完善登录信息！")}else if("login_ws"===e.check_login);else if("login_face"===e.check_login);else if("login_iphone"===e.check_login)if(e.account.phone.trim().length>0&&e.account.check_code.trim().length>0){var l=e.url+"/v1/common/sms/employee/check_login";e.$axios({method:"post",url:l,data:{phone:e.account.phone,code:e.account.check_code}}).then(function(t){"success"===t.data.message?(sessionStorage.setItem("authorization",t.data.new_authorization),localStorage.setItem("access-user",a()(t.data.real_name)),e.$router.push({path:"/"})):(console.info(t),e.hintInfo("warning","登录失败！"))}).catch(function(t){console.info(t),e.hintInfo("warning","登录失败！")})}else e.hintInfo("warning","请完善登录信息！")},hintInfo:function(e,t){"success"==e?this.$message({message:t,type:"success"}):"warning"==e?this.$message({message:t,type:"warning"}):this.$message.error("出错了！")}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loginView"},[e._m(0),e._v(" "),n("el-form",{ref:"AccountForm",staticClass:"demo-ruleForm login-container",attrs:{model:e.account,"label-position":"left","label-width":"0px"}},[n("h3",{staticClass:"title",on:{click:e.return_login}},[e._v(e._s(e.wel_login))]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.login_flag,expression:"login_flag"}],staticClass:"login_sty"},[n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"请输入集团代码"},model:{value:e.account.code,callback:function(t){e.$set(e.account,"code",t)},expression:"account.code"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"请输入用户名/手机号"},model:{value:e.account.username,callback:function(t){e.$set(e.account,"username",t)},expression:"account.username"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"pwd"}},[n("el-input",{attrs:{type:"password",autofocus:e.pwdFocus,"auto-complete":"off",placeholder:"请输入账号密码"},model:{value:e.account.pwd,callback:function(t){e.$set(e.account,"pwd",t)},expression:"account.pwd"}})],1),e._v(" "),n("el-form-item",[n("el-select",{attrs:{placeholder:"早班"},model:{value:e.scheduleValue,callback:function(t){e.scheduleValue=t},expression:"scheduleValue"}},e._l(e.schedule,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.login_iphone,expression:"login_iphone"}],staticClass:"login_sty"},[n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"请输入集团代码"},model:{value:e.account.code,callback:function(t){e.$set(e.account,"code",t)},expression:"account.code"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"请输入手机号"},model:{value:e.account.phone,callback:function(t){e.$set(e.account,"phone",t)},expression:"account.phone"}})],1),e._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:18}},[n("el-form-item",{attrs:{prop:"check_code"}},[n("el-input",{attrs:{type:"password",autofocus:e.pwdFocus,"auto-complete":"off",placeholder:"请输入验证码"},model:{value:e.account.check_code,callback:function(t){e.$set(e.account,"check_code",t)},expression:"account.check_code"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{prop:"code"}},[n("el-button",{staticStyle:{width:"110px"},attrs:{disabled:e.dis_btn},on:{click:e.send_code}},[e._v(e._s(e.value_btn))])],1)],1)],1),e._v(" "),n("el-form-item",[n("el-select",{attrs:{placeholder:"早班"},model:{value:e.scheduleValue,callback:function(t){e.scheduleValue=t},expression:"scheduleValue"}},e._l(e.schedule,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.login_wx,expression:"login_wx"}],staticClass:"login_sty"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"请输入集团代码"},model:{value:e.account.code,callback:function(t){e.$set(e.account,"code",t)},expression:"account.code"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",[n("el-select",{attrs:{placeholder:"早班"},model:{value:e.scheduleValue,callback:function(t){e.scheduleValue=t},expression:"scheduleValue"}},e._l(e.schedule,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),n("div",{staticStyle:{height:"180px","text-align":"center"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("div",{staticStyle:{height:"238px",display:"flex","align-items":"center","justify-content":"center",background:"#FFFFFF","border-radius":"4px"}},[n("img",{staticStyle:{width:"190px",height:"auto"},attrs:{src:o("D+iS")}}),n("br")])])],1)],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.login_face,expression:"login_face"}],staticClass:"login_sty"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"请输入集团代码"},model:{value:e.account.code,callback:function(t){e.$set(e.account,"code",t)},expression:"account.code"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",[n("el-select",{attrs:{placeholder:"早班"},model:{value:e.scheduleValue,callback:function(t){e.scheduleValue=t},expression:"scheduleValue"}},e._l(e.schedule,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),n("div",{staticStyle:{height:"180px","text-align":"center"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("videos",{attrs:{isOpen:e.flag_camera}})],1)],1)],1)],1),e._v(" "),n("el-form-item",{staticStyle:{width:"100%"}},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.login_btn,expression:"login_btn"}],staticStyle:{width:"100%"},attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("登录\n      ")])],1),e._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("span",{on:{click:function(t){e.login_type("login_wx")}}},[e._v("微信扫码登录")])]),e._v(" "),n("el-col",{attrs:{span:6}},[n("span",{on:{click:function(t){e.login_type("login_face")}}},[e._v("人脸识别登录")])]),e._v(" "),n("el-col",{attrs:{span:6}},[n("span",{on:{click:function(t){e.login_type("login_iphone")}}},[e._v("手机验证码登录")])]),e._v(" "),n("el-col",{attrs:{span:6}},[n("span",{on:{click:function(t){e.login_type("login_cus_num")}}},[e._v("工号卡刷卡登录")])])],1)],1),e._v(" "),e._m(1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"nav_title"},[t("div",{staticClass:"logo"},[t("p",{staticClass:"logo_text"},[this._v("颐陆智助酒店管理系统")])]),this._v(" "),t("p",{staticClass:"logo_en"},[this._v("ISpiderTech. Hotel MIS")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"footer"},[t("p",[this._v("Copyright © 2017 皇冠晶品All Rights Reserved 上海居客酒店投资管理有限公司版权所有"),t("br"),this._v(" "),t("span",[this._v("备案号：沪ICP备08014899号")])])])}]};var d=o("VU/8")(g,h,!1,function(e){o("Pv4D")},"data-v-cd55a842",null);t.default=d.exports}});
//# sourceMappingURL=4.363ba686a0d591206dcf.js.map